(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{149:function(e,t,a){"use strict";a.r(t),a(79),a(152),a(52);var n=a(12),s=a.n(n),r=a(51),o=a.n(r),l=a(0),i=a.n(l),c=a(164),m=a.n(c),d=a(167),u=a.n(d),h=(a(180),a(154)),p=a.n(h),f=a(160),v=a.n(f),E=(a(161),a(162)),g=a(168),b=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={modal:{}},a}return s()(t,e),t.prototype.render=function(){var e,t=this,a=this.props.modal;return void 0!=this.props.modal.exec&&(e=i.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){window.$("#pageModal").modal("hide"),t.props.modal.exec()}},this.props.modal.exec_text||"実行")),i.a.createElement("div",{className:"modal fade",id:"pageModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},i.a.createElement("div",{className:"modal-content"},i.a.createElement("div",{className:"modal-header"},i.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},a.title),i.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"})),i.a.createElement("div",{className:"modal-body",style:{wordBreak:"break-all"}},a.body),i.a.createElement("div",{className:"modal-footer"},i.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},a.cancel_text||"取り消し"),e))))},t}(l.Component),y=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){return i.a.createElement("div",{className:"page",style:{width:"100%"}},i.a.createElement("div",{className:"page-content"},i.a.createElement("div",{className:"container text-center"},i.a.createElement("div",{className:"display-1 text-muted mb-5"},i.a.createElement("i",{className:"si si-exclamation"})," データ取得中"),i.a.createElement("h1",{className:"h2 mb-3"},"少々お待ち下さい..."),i.a.createElement("p",{className:"h4 text-muted font-weight-normal mb-7"},"法定通貨に依存しない完全独自経済圏で好きなことを追求して生きていこう！"),i.a.createElement("a",{className:"btn btn-primary",href:"/"},i.a.createElement("i",{className:"fe fe-arrow-left mr-2"}),"トップページへ戻る"))))},t}(l.Component),w=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){var e,t=this;if(void 0!=this.props.user){var a="0.00000000";void 0!=this.props.serverInfo&&void 0!=this.props.serverInfo.amount&&void 0!=this.props.serverInfo.amount.aht&&(a=this.props.serverInfo.amount.aht.earned+".00000000"),e=i.a.createElement("a",{href:"#",className:"nav-link pr-0 leading-none","data-toggle":"dropdown"},i.a.createElement("span",{className:"avatar",style:{backgroundImage:"url("+this.props.user.photoURL+")"}}),i.a.createElement("span",{className:"ml-2 d-none d-lg-block"},i.a.createElement("span",{className:"text-default"},this.props.user.displayName),i.a.createElement("small",{className:"text-muted d-block mt-1"},a," AHT")))}return i.a.createElement("div",{className:"page"},i.a.createElement("div",{className:"flax-fill"},i.a.createElement("div",{className:"header py-4"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"d-flex"},i.a.createElement("a",{className:"header-brand",href:"/"},"ALIS HackerToken"),i.a.createElement("div",{className:"d-flex order-lg-2 ml-auto"},i.a.createElement("div",{className:"dropdown"},e,i.a.createElement("div",{className:"dropdown-menu dropdown-menu-right dropdown-menu-arrow"},i.a.createElement("a",{className:"dropdown-item",onClick:function(){t.props.auth.logout()}},i.a.createElement("i",{className:"dropdown-icon fe fe-log-out"})," ログアウト")))))))))},t}(l.Component),N=a(213),k=a.n(N);v.a.locale("ja");var x=function(e){function t(t){return e.call(this,t)||this}s()(t,e);var a=t.prototype;return a.confirmRemoval=function(e){console.log(this.props),this.props.auth.removeWavesAddress(e)},a.addWaves=function(){var e=this;this.props.auth.genRandomValue(function(t){var a="https://client.wavesplatform.com#gateway/auth?r=https://alishackers.club/&n=ALIS HackerToken&i=/img/alis_hackers.png&s=//oauth&d="+t+"_"+e.props.user.uid+"&debug=false";window.clearInterval(e.interval);var n=window.open(a),s=u.a.parse(window.location.href);null==n?window.location.href=a:(n.parentWindow=window,e.interval=window.setInterval(function(){var t,a,r;try{r=n.location.href,a=u.a.parse(r),n.close()}catch(e){t=e}null==t&&s.host===a.host&&(window.clearInterval(e.interval),e.props.auth.validateWavesAddress(r))},1e3))})},a.render=function(){var e,t=this,a=(this.props.userInfo||{}).waves_addresses||{};if(p.a.isEmpty(a))e=i.a.createElement("div",{className:"card-body"},"Wavesアドレスは登録されていません。");else{var n,s=[],r=[];for(var o in a)!0===a[o].receiver?n=a[o]:r.push(a[o]);void 0!=n&&r.unshift(n),r.forEach(function(e,r){var o;o=void 0==n&&0==r||void 0!=n&&n.address==e.address?i.a.createElement("img",{src:k.a}):i.a.createElement("img",{"data-toggle":"tooltip",className:"waves-receiver",title:"受け取りアドレスに設定する",src:k.a,onClick:function(){t.props.auth.setAsReceiver(e.address)}}),s.push(i.a.createElement("tr",null,i.a.createElement("td",null,o),i.a.createElement("td",{style:{wordBreak:"break-all"}},i.a.createElement("b",null,i.a.createElement("a",{href:"https://wavesexplorer.com/address/"+e.address,target:"_blank"},e.address))),i.a.createElement("td",{style:{fontSize:"12px"}},i.a.createElement("span",{style:{whiteSpace:"nowrap"}},v()(a[e.address].added_at).format("YYYY年"))," ",i.a.createElement("span",{style:{whiteSpace:"nowrap"}},v()(a[e.address].added_at).format("M月D日"))),i.a.createElement("td",null,i.a.createElement("a",{className:"icon",onClick:function(){t.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"fas fa-exclamation-triangle text-warning"})," ","Wavesアドレス削除確認"),body:i.a.createElement("div",null,"本当に ",i.a.createElement("b",null,e.address)," を削除してよろしいですか？"),exec:function(){t.confirmRemoval(e.address)}})}},i.a.createElement("i",{className:"fe fe-trash text-danger"})))))}),e=i.a.createElement("table",{className:"table card-table table-striped table-vcenter"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"受取"),i.a.createElement("th",null,"Wavesアドレス"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"追加日"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"削除"))),i.a.createElement("tbody",null,s))}return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"table-responsible"},e),i.a.createElement("div",{className:"card-footer text-right"},i.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){t.addWaves()}},"Wavesアドレスを追加")))))},t}(l.Component),A=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){var e=this,t=[];return(this.props.items||[]).forEach(function(a,n){t.push(i.a.createElement("div",{role:"alert",className:"alert alert-"+a.type+" ml-3 mr-3",style:{width:"100%"}},i.a.createElement("button",{type:"button",className:"close",onClick:function(){e.props.alerts.dissmissAlert(n)}}),a.text))}),i.a.createElement("div",{className:"row"},t)},t}(l.Component),_=(a(169),a(170)),I=a.n(_);v.a.locale("ja");var M=function(e){function t(t){return e.call(this,t)||this}s()(t,e);var a=t.prototype;return a.link_discord=function(){this.props.auth.link_discord()},a.link_github=function(){this.props.auth.link_github()},a.unlink_twitter=function(){this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","取り消し不可！"),body:"ツイッターのアカウントはウェブサイトのログインで使用しているので取り消せません。",cancel_text:"確認"})},a.unlink_github=function(){this.unlink_social({key:"github",mission_no:"4"})},a.unlink_social=function(e){var t=this;void 0===e&&(e={}),this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-exclamation-triangle"})," ","取り消し確認！"),body:i.a.createElement("p",null,"本当に",i.a.createElement("span",{className:"text-capitalize"},e.key),"アカウントを取り消してよろしいですか？このアカウントを使って完了したタスクも無効になります。"),exec_text:"実行",exec:function(){void 0!=t.props.userInfo.missions&&void 0!=t.props.userInfo.missions.join&&void 0!=t.props.userInfo.missions.join.tasks&&void 0!=t.props.userInfo.missions.join.tasks[e.mission_no]&&void 0==t.props.userInfo.missions.join.confirmed?(delete t.props.userInfo.missions.join.tasks[e.mission_no],t.props.auth.updateData({missions:t.props.userInfo.missions},function(){t.props.auth.setUserInfo("missions",t.props.userInfo.missions,function(){t.props.auth["unlink_"+e.key]()})})):t.props.auth["unlink_"+e.key]()}})},a.unlink_discord=function(){this.unlink_social({key:"discord",mission_no:"3"})},a.render=function(){var e=this,t=[];return[{type:"twitter",name:"Twitter",color:"blue",id:"twitter.com",func_unlink:"unlink_twitter"},{type:"discord",name:"Discord",color:"green",func_link:"link_discord",func_unlink:"unlink_discord"},{type:"github",name:"Github",color:"red",id:"github.com",func_link:"link_github",func_unlink:"unlink_github"},{type:"alis",name:"ALIS",color:"purple"}].forEach(function(a){var n;void 0!=e.props.social_links[a.id]?a.displayName=e.props.social_links[a.id].uid:void 0!=e.props.serverInfo&&void 0!=e.props.serverInfo[a.type]&&(a.displayName=e.props.serverInfo[a.type].id),n="alis"===a.type?i.a.createElement("img",{src:I.a,style:{height:"30px",width:"30px",border:"none",marginBottom:"2px"}}):i.a.createElement("i",{className:"fab fa-"+a.type});var s="social-linked",r=function(){};void 0==a.displayName?("alis"==a.type?a.displayName=i.a.createElement("div",null,"この機能は準備中です"):(a.displayName=i.a.createElement("div",null,"アカウントをリンクする"),r=e[a.func_link]),s="social-unlinked",a.color="gray"):void 0!=a.func_unlink&&(r=e[a.func_unlink]),t.push(i.a.createElement("div",{className:"col-12 col-sm-6 col-lg-12"},i.a.createElement("div",{className:"card p-3 "+s,onClick:function(){r.apply(e)}},i.a.createElement("div",{className:"d-flex align-items-center"},i.a.createElement("span",{className:"stamp stamp-md bg-"+a.color+" mr-3"},n),i.a.createElement("div",null,i.a.createElement("h4",{className:"m-0"},i.a.createElement("span",null,a.name)),i.a.createElement("small",{className:"text-muted"},a.displayName))))))}),i.a.createElement("div",{className:"row"},t)},t}(l.Component),U=(a(156),a(157),a(158),a(81),a(82),a(55),{error_too_short:{title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," 連続で申請はできません！"),body:"１時間以上空けてからもう一度申請して下さい。",cancel_text:"確認"},error_general:{title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," エラーが発生しました！"),body:"時間を置いてからもう一度申請して下さい。",cancel_text:"確認"}}),S=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={checking:!1},a}s()(t,e);var a=t.prototype;return a.isChecking=function(e,t){null==this.props.checking&&this.setState({checking:e},function(){t()})},a.clearChecking=function(){this.setState({checking:null})},a.checkGithub=function(){var e=this;void 0==this.props.social_links["github.com"]?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," ","Githubアカウントが登録されていません！"),body:"オーガニゼーション登録のチェックをする前にGithubアカウントを登録して下さい。",exec_text:"登録",exec:function(){e.props.auth.link_github()}}):this.isChecking(2,function(){fetch("https://api.github.com/user/"+e.props.social_links["github.com"].uid).then(function(e){return e.json()}).then(function(t){if(e.clearChecking(),void 0==t.error){var a=t.login;return fetch("https://api.github.com/orgs/alisista/members/"+a)}3==t.error?e.props.showModal(U.error_too_short):e.props.showModal(U.error_general)}).then(function(t){204===t.status?(e.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-success fas fa-check"})," ","メンバーシップ確認完了"),body:"どうもありがとうございます！",cancel_text:"確認"}),e.props.auth.completeTask("join",4)):e.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," ","メンバーシップが確認できません！"),body:"参加申請、招待承認、メンバーシップ公開をしてからもう一度申請しなおして下さい。",cancel_text:"確認"})}).catch(function(){e.props.showModal(U.error_general),e.clearChecking()})})},a.checkDiscord=function(){var e=this;void 0==this.props.serverInfo||void 0==this.props.serverInfo.discord?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," ","Discordアカウントが登録されていません！"),body:"Discord参加のチェックをする前にDiscordアカウントを登録して下さい。",exec_text:"登録",exec:function(){e.props.auth.link_discord()}}):this.isChecking(3,function(){fetch("https://dry-caverns-24809.herokuapp.com/alishackers/check/discord/"+e.props.user.uid+"/"+e.props.serverInfo.discord.id).then(function(e){return e.json()}).then(function(t){e.clearChecking(),void 0!=t.error?3==t.error?e.props.showModal(U.error_too_short):e.props.showModal(U.error_general):t.isMember?(e.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-success fas fa-check"})," ","Discord参加確認完了"),body:"どうもありがとうございます！",cancel_text:"確認"}),e.props.auth.completeTask("join",3)):e.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," ","Discord参加が確認できません！"),body:"ALISハッカー部のDiscordに参加してからもう一度申請しなおして下さい。",cancel_text:"確認"})})})},a.checkFollowing=function(){var e=this;this.isChecking(2,function(){fetch("https://dry-caverns-24809.herokuapp.com/alishackers/check/following/"+e.props.user.id).then(function(e){return e.json()}).then(function(t){e.clearChecking(),void 0!=t.error?3==t.error?e.props.showModal(U.error_too_short):e.props.showModal(U.error_general):t.following?(e.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-success fas fa-check"})," フォロー確認完了"),body:"どうもありがとうございます！",cancel_text:"確認"}),e.props.auth.completeTask("join",2)):e.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," ","フォローが完了していません！"),body:"ツイッターアカウントをフォローしてからもう一度申請しなおして下さい。",cancel_text:"確認"})}).catch(function(){e.props.showModal(U.error_general),e.clearChecking()})})},a.render=function(){var e,t,a=this,n=(((this.props.userInfo||{}).missions||{}).join||{}).tasks||{};if(0==p.a.isEmpty((this.props.userInfo||{}).waves_addresses||{}))for(var s in t=!0,this.props.userInfo.waves_addresses)(void 0==e||e>this.props.userInfo.waves_addresses[s].added_at)&&(e=this.props.userInfo.waves_addresses[s].added_at);var r,o,l=(((this.props.userInfo||{}).missions||{}).join||{}).revoke,c=[{id:"1",task_id:"task-1",task:"ハッカー部ウェブサイトにツイッターでログイン",done:!0,date:1*v()(this.props.user.created_at).format("x")},{id:"2",task_id:"task-2",task:"Wavesアドレスを登録",btn_txt:"登録",done:t,date:e,btn_func:"addWaves"},{id:"3",task_id:"task-3",task:i.a.createElement("div",null,"ハッカー部ツイッターアカウント",i.a.createElement("a",{className:"ml-2 mr-2",href:"https://twitter.com/alishackers",target:"_blank"},i.a.createElement("i",{className:"fab fa-twitter"})," alishackers"),"をフォロー"),btn_func:"checkFollowing",done:void 0!=n[2],date:n[2]},{id:"4",task_id:"task-4",task:i.a.createElement("div",null,"ハッカー部",i.a.createElement("a",{href:"https://discordapp.com/invite/TyKbbrT",target:"blank",className:"ml-2 mr-2"},i.a.createElement("i",{className:"fab fa-discord"})," DISCORD"),"に参加"),btn_func:"checkDiscord",done:void 0!=n[3],date:n[3]},{id:"5",task_id:"task-5",task:i.a.createElement("div",null,"ハッカー部",i.a.createElement("a",{href:"https://github.com/alisista",target:"blank",className:"ml-2 mr-2"},i.a.createElement("i",{className:"fab fa-github"})," Githubオーガニゼーション"),"に参加申請",i.a.createElement("br",null),"申請方法",i.a.createElement("i",{className:"fa fa-arrow-circle-right ml-2 mr-2"}),i.a.createElement("b",{className:"text-orange"},"#アリスハッカートークン"),"チャンネルで自分が開発したいものやどういった活動をしたいかをコメント",i.a.createElement("br",null),"招待が来たら承認し、",i.a.createElement("a",{href:"https://help.github.com/articles/publicizing-or-hiding-organization-membership/",target:"_blank"},"メンバーシップを公開"),"する"),btn_func:"checkGithub",done:void 0!=n[4],date:n[4]}],m=p()(c).filter(function(e){return e.done}).length,d=Math.floor(m/5*100),u=["gray","red","orange","teal","blue","green"][m],h=[];if(c.forEach(function(e,t){var n=t+1,s="gray",r=e.task,o=e.btn_txt||"チェック";a.props.checking===t&&(o=i.a.createElement("i",{className:"fas fa-cog fa-spin"}));var c=i.a.createElement("button",{className:"btn btn-primary",onClick:function(){a[e.btn_func]()},style:{minWidth:"60px"}},o);1==e.done&&(n=i.a.createElement("i",{className:"fa fa-check"}),s="success",r=i.a.createElement("del",null,e.task),c=v()(e.date).fromNow());var m="";void 0!=l&&l.includes(e.task_id)&&(n=i.a.createElement("i",{className:"fa fa-ban"}),s="danger",m="table-danger"),h.push(i.a.createElement("tr",{className:m},i.a.createElement("td",null,i.a.createElement("span",{className:"stamp stamp-sm bg-"+s},n)),i.a.createElement("td",null,r),i.a.createElement("td",{style:{fontSize:"12px",whiteSpace:"nowrap"}},c)))}),100==d)if(r=i.a.createElement("i",{className:"text-success fa fa-check-circle mr-3"}),void 0!=this.props.userInfo.missions.join.confirmed){var f=!1,E=this.props.history||[],g=Array.isArray(E),b=0;for(E=g?E:E[Symbol.iterator]();;){var y;if(g){if(b>=E.length)break;y=E[b++]}else{if((b=E.next()).done)break;y=b.value}if("join"==y.mission_id){f=!0;break}}o=void 0!=l?i.a.createElement("tr",{style:{backgroundColor:"#ddd"}},i.a.createElement("td",null," ",i.a.createElement("span",{className:"stamp stamp-sm bg-danger"},i.a.createElement("i",{className:"fa fa-ban"}))),i.a.createElement("td",{className:"text-danger"},"いくつかのタスクでソーシャルアカウントの重複使用があったため、認証に失敗しました。以前に別のユーザーに使われていないソーシャルアカウントで再トライして下さい。"),i.a.createElement("td",null," ",i.a.createElement("button",{className:"btn btn-warning",onClick:function(){a.props.auth.retry()},style:{minWidth:"60px",cursor:"pointer"}},"再トライ"))):1==f?i.a.createElement("tr",{style:{backgroundColor:"#ddd"}},i.a.createElement("td",null," ",i.a.createElement("span",{className:"stamp stamp-sm bg-danger"},i.a.createElement("i",{className:"fa fa-award"}))),i.a.createElement("td",{className:"text-danger"},"おめでとうございます！トークンが配布されました。トークン獲得履歴をお確かめ下さい。"),i.a.createElement("td",null," ",i.a.createElement("button",{className:"btn btn-success",style:{minWidth:"60px",cursor:"default"}},"確定済"))):i.a.createElement("tr",{style:{backgroundColor:"#ddd"}},i.a.createElement("td",null," ",i.a.createElement("span",{className:"stamp stamp-sm bg-danger"},i.a.createElement("i",{className:"fa fa-award"}))),i.a.createElement("td",{className:"text-danger"},"おめでとうございます！ミッション達成を認証中です。２４時間以内に認証されトークン配布が確定されますので少々お待ち下さい。"),i.a.createElement("td",null," ",i.a.createElement("button",{className:"btn btn-success",style:{minWidth:"60px",cursor:"default"}},"認証中")))}else o=i.a.createElement("tr",{style:{backgroundColor:"#ddd"}},i.a.createElement("td",null," ",i.a.createElement("span",{className:"stamp stamp-sm bg-danger"},i.a.createElement("i",{className:"fa fa-award"}))),i.a.createElement("td",{className:"text-danger"},"おめでとうございます！ミッション達成を認証してトークン配布手続きを開始するために確定ボタンをクリックして下さい。一度確定したミッションは取り消せなくなり、そのタスクで使用したソーシャルアカウントは別のユーザーで同一タスク遂行には使用できません。"),i.a.createElement("td",null," ",i.a.createElement("button",{className:"btn btn-primary",onClick:function(){a.props.auth.confirmMission("join")},style:{minWidth:"60px"}},"確定")));return i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",{className:"card-title"},i.a.createElement("span",{className:"stamp stamp-sm bg-primary mr-3"},i.a.createElement("i",{className:"fa fa-award"})),"ALISハッカー部入部で",i.a.createElement("b",{className:"text-blue ml-2 mr-2"},"100AHT"),"獲得！")),i.a.createElement("div",{className:"card-body text-center"},i.a.createElement("div",{className:"h5"},"タスク進捗 （",m,"/5）"),i.a.createElement("div",{className:"display-4 font-weight-bold mb-4"},r,d,"%"),i.a.createElement("div",{className:"progress progress-sm"},i.a.createElement("div",{className:"progress-bar bg-"+u,style:{width:d+"%"}}))),i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table card-table table-striped table-vcenter"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"タスク"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"完了日"))),i.a.createElement("tbody",null,h,o))))},t}(l.Component),C=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={},a}return s()(t,e),t.prototype.render=function(){if(0==(this.props.history||[]).length)return null;var e=[];return this.props.history.forEach(function(t){e.push(i.a.createElement("tr",null,i.a.createElement("td",null,v()(t.date).format("M月D日")),i.a.createElement("td",null,i.a.createElement("b",{className:"text-primary"},t.amount)," AHT"),i.a.createElement("td",null,t.reason||"ALISハッカー部に入部")))}),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",{className:"card-title"},i.a.createElement("span",{className:"stamp stamp-sm bg-primary mr-3"},i.a.createElement("i",{className:"fas fa-hand-holding-heart"})),"トークン獲得履歴")),i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table card-table table-striped table-vcenter"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"獲得日"),i.a.createElement("th",null,"トークン額"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"獲得事由"))),i.a.createElement("tbody",null,e))))},t}(l.Component),R=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={},a}return s()(t,e),t.prototype.render=function(){if(0==(this.props.payment||[]).length)return null;var e=[];return this.props.payment.forEach(function(t){var a,n,s={};"canceled"===t.status?(s={textDecoration:"line-through",color:"tomato"},a=i.a.createElement("span",null,"取り消し"),n=1==t.cancel?i.a.createElement("span",null,"理由: 残高不足"):i.a.createElement("span",null,"理由: 不明")):void 0!=t.sent_at&&(a=i.a.createElement("a",{href:"https://wavesexplorer.com/tx/"+t.tx,target:"_blank"},v()(t.sent_at).format("M月D日 HH:mm"))),"confirmed"==t.status?n=i.a.createElement("a",{href:"https://wavesexplorer.com/blocks/"+t.block,target:"_blank"},i.a.createElement("i",{className:"fa fa-check text-success"})," ",t.block):"sent"===t.status&&(n=i.a.createElement("span",null,i.a.createElement("i",{className:"text-orange fa fa-spin fa-cog"})," 確認中...")),e.push(i.a.createElement("tr",{style:s},i.a.createElement("td",null,v()(t.date).format("M月D日 HH:mm")),i.a.createElement("td",null,i.a.createElement("b",{className:"text-primary"},t.amount)," AHT"),i.a.createElement("td",null,a),i.a.createElement("td",null,n)))}),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",{className:"card-title"},i.a.createElement("span",{className:"stamp stamp-sm bg-orange mr-3"},i.a.createElement("i",{className:"fas fa-paper-plane"})),"トークン支払い履歴")),i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table card-table table-striped table-vcenter"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"申請日"),i.a.createElement("th",null,"トークン額"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"送信日（取引詳細）"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"完了確認"))),i.a.createElement("tbody",null,e))))},t}(l.Component);a(36),a(174),v.a.locale("ja");var j=function(e){function t(t){return e.call(this,t)||this}s()(t,e);var a=t.prototype;return a.reservePayment=function(){var e,t=this,a=this.getAmounts(),n=(a.amount_aht,a.unpaid_aht),s=a.last_payment;for(var r in this.props.userInfo.waves_addresses||{})void 0!=e&&1!=this.props.userInfo.waves_addresses[r].receiver||(e=r);Date.now()-s<6048e5?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","引き出し申請不可期間！"),body:i.a.createElement("p",null,"トークンの引き出しができるのは一週間に一度だけです。"),cancel_text:"確認"}):void 0==e?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","Wavesアドレスが登録されていません！"),body:i.a.createElement("p",null,"Wavesのアドレスを登録してから、もう一度お試し下さい。"),cancel_text:"確認"}):0===n?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","残高がありません！"),body:i.a.createElement("p",null,"未払いのトークンはありません。"),cancel_text:"確認"}):this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-exclamation-triangle"})," ","トークン引き出し確認！"),body:i.a.createElement("p",null,i.a.createElement("b",{className:"text-danger"},n),"AHTを",i.a.createElement("b",{className:"text-danger"},e),"に送信してよろしいですか？"),exec_text:"実行",exec:function(){t.props.auth.registerPayment(n,e)}})},a.getAmounts=function(){var e=0,t=0,a=0;void 0!=this.props.serverInfo.amount&&void 0!=this.props.serverInfo.amount.aht&&(e=this.props.serverInfo.amount.aht.earned,t=this.props.serverInfo.amount.aht.earned-this.props.serverInfo.amount.aht.paid);var n=this.props.payment||[];return void 0!=n[0]&&"requested"==n[0].status&&(t-=n[0].amount),void 0!=n[0]&&(a=n[0].date),{amount_aht:e,unpaid_aht:t,last_payment:a}},a.render=function(){var e=this,t=this.getAmounts(),a=t.amount_aht,n=t.unpaid_aht;return[i.a.createElement("div",{className:"card card-profile"},i.a.createElement("div",{className:"card-header",style:{backgroundImage:"url(/img/bg-showcase-4.jpg)"}}),i.a.createElement("div",{className:"card-body text-center"},i.a.createElement("img",{className:"card-profile-img",style:{width:"96px"},src:this.props.user.photoURL.replace(/_normal/,"")}),i.a.createElement("h3",{className:"mb-3"},this.props.user.displayName),i.a.createElement("p",null,i.a.createElement("b",{className:"text-danger"},n," AHT")," ",i.a.createElement("span",{style:{color:"#ttt",fontSize:"12px"}},"未払い")," /"," ",i.a.createElement("b",{className:"text-success"},a," AHT")," ",i.a.createElement("span",{style:{color:"#ttt",fontSize:"12px"}},"獲得")),i.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:function(){e.reservePayment()}},"未払いトークン引き出し")))]},t}(l.Component);a(175),v.a.locale("ja");var B=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={ordering:!1,users:[]},a}s()(t,e);var a=t.prototype;return a.order=function(){var e=this;fetch("https://dry-caverns-24809.herokuapp.com/alishackers/users/list/").then(function(e){return e.json()}).then(function(t){e.setState({ordering:!0,users:t.users})}).catch(function(e){console.log(e)})},a.selectUser=function(){var e,t=window.$("#client").val(),a=this.state.users||[],n=Array.isArray(a),s=0;for(a=n?a:a[Symbol.iterator]();;){var r;if(n){if(s>=a.length)break;r=a[s++]}else{if((s=a.next()).done)break;r=s.value}var o=r;if(o.uid===t){e=o;break}}this.setState({selectedUser:e})},a.makePayment=function(){var e=this,t=this.state.selectedUser,a=1*window.$("#token_amount").val(),n=window.$("#what_for").val();void 0==t?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," 入力エラー！"),body:"案件の依頼先を選択してください。",cancel_text:"確認"}):1==p.a.isNaN(a)||0>=a||1e4<a?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," 入力エラー！"),body:"10000以下の数字を入力して下さい。",cancel_text:"確認"}):null!=n.match(/^\s*$/)?this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," 入力エラー！"),body:"案件を入力して下さい。",cancel_text:"確認"}):this.props.showModal({title:i.a.createElement("div",null,i.a.createElement("i",{className:"text-danger fas fa-ban"})," 支払い確認！"),body:t.displayName+"さんに"+a+"AHTを『"+n+"』についてお支払いしてよろしいですか？",exec_text:"実行",exec:function(){e.props.auth.makePayment(t,a,n)}})},a.render=function(){var e,t=this;if("955140685392424961"!==this.props.user.id)return null;if(!0===this.state.ordering){var a,n=[],s=this.state.users,r=Array.isArray(s),o=0;for(s=r?s:s[Symbol.iterator]();;){var l;if(r){if(o>=s.length)break;l=s[o++]}else{if((o=s.next()).done)break;l=o.value}var c=l;n.push(i.a.createElement("option",{value:c.uid},c.displayName))}var m="https://abs.twimg.com/sticky/default_profile_images/default_profile_200x200.png";void 0!=this.state.selectedUser&&void 0!=this.state.selectedUser.photoURL&&(m=this.state.selectedUser.photoURL),a=i.a.createElement("img",{src:m,style:{height:"36px",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"}}),e=i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-6"},i.a.createElement("label",{className:"form-label"},"依頼先"),i.a.createElement("div",{className:"input-group"},i.a.createElement("select",{className:"form-control",id:"client",onChange:function(){t.selectUser()}},i.a.createElement("option",{value:""},"依頼先を選択してください"),n),i.a.createElement("span",{className:"input-group-append"},i.a.createElement("span",{className:"input-group-text",style:{padding:0}},a)))),i.a.createElement("div",{className:"col-md-6"},i.a.createElement("label",{className:"form-label"},"依頼額"),i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"トークン額",id:"token_amount"}),i.a.createElement("span",{className:"input-group-append"},i.a.createElement("span",{className:"input-group-text"},"AHT"))))),i.a.createElement("div",{className:"row mt-3"},i.a.createElement("div",{className:"col-12"},i.a.createElement("label",{className:"form-label"},"案件"),i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"依頼案件",id:"what_for"}),i.a.createElement("span",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){t.makePayment()}},"支払い"))))))}var d=[];return this.props.history.forEach(function(e){var t;void 0!=e.photoURL&&(t=i.a.createElement("span",{className:"avatar",style:{backgroundImage:"url("+e.photoURL+")"}})),d.push(i.a.createElement("tr",null,i.a.createElement("td",{style:{whiteSpace:"nowrap"}},v()(e.date).format("M月D日")),i.a.createElement("td",null,i.a.createElement("b",{className:"text-primary"},e.amount)," AHT"),i.a.createElement("td",null,e.reason||"ALISハッカー部に入部"),i.a.createElement("td",{style:{width:"32px",paddingRight:"0px"}},t),i.a.createElement("td",null,e.displayName)))}),i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header"},i.a.createElement("h4",{className:"card-title"},i.a.createElement("span",{className:"stamp stamp-sm bg-purple mr-3"},i.a.createElement("i",{className:"fas fa-paper-plane"})),"お仕事発注履歴"," ",i.a.createElement("button",{className:"ml-3 btn btn-sm btn-purple",onClick:function(){t.order()}},"発注"))),e,i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"table card-table table-striped table-vcenter"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"支払日"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"トークン額"),i.a.createElement("th",{style:{whiteSpace:"nowrap"}},"案件"),i.a.createElement("th",{style:{whiteSpace:"nowrap"},colSpan:"2"},"依頼先"))),i.a.createElement("tbody",null,d))))},t}(l.Component),T=a(176),D=function(){function e(e){this.component=e}var t=e.prototype;return t.pushAlert=function(e,t){void 0===t&&(t="danger");var a=this.component.state.alerts||[];a.unshift({type:t,text:e}),this.component.setState({alerts:a},function(){})},t.dissmissAlert=function(e){var t=this.component.state.alerts||[];t.splice(e,1),this.component.setState({alerts:t})},e}();v.a.locale("ja");var L=function(e){function t(t){var a;(a=e.call(this,t)||this).showModal=function(e){a.setState({modal:e},function(){window.$("#pageModal").modal({})})};var n=t.location.href||"",s=u.a.parse(n,!0),r=null,l=null;return void 0!=s.query.a&&void 0!=s.query.s&&void 0!=s.query.d&&void 0!=s.query.p&&(r=t.location.origin+"/home/"+t.location.search),void 0!=s.query.error&&(l=s.query.error),a.mission={id:"join",aht:100,tasks:[{id:"task-1"},{id:"task-2"},{id:"task-3",social:"twitter"},{id:"task-4",social:"discord"},{id:"task-5",social:"github"}]},a.state={serverInfo:{},userInfo:{},history:[],admin_history:[],payment:[],error:l,modal:{},oauth:r,alerts:[],social_links:{}},a.alerts=new D(o()(o()(a))),a}s()(t,e);var a=t.prototype;return a.componentDidMount=function(){void 0!=this.state.error&&1*this.state.error==1&&this.alerts.pushAlert("そのDiscordアカウントは既に他の人に使われているため登録できません。","warning"),this.auth=new T.a(this,{redirect:!0,oauth:this.state.oauth})},a.componentDidUpdate=function(){window.$(".waves-receiver").tooltip({boundary:"window",placement:"right"})},a.render=function(){var e=this,t=[];(this.state.alerts||[]).forEach(function(a,n){t.push(i.a.createElement("div",{role:"alert",className:"alert alert-"+a.type+" ml-3 mr-3",style:{width:"100%"}},i.a.createElement("button",{type:"button",className:"close",onClick:function(){e.alerts.dissmissAlert(n)}}),a.text))});var a=void 0===this.state.isUser?i.a.createElement(y,null):this.render_dashboard();return i.a.createElement(E.a,null,i.a.createElement(m.a,{link:[{rel:"stylesheet",type:"text/css",href:"/tabler/css/tabler.min.css"},{rel:"stylesheet",type:"text/css",href:"/css/common.css"}]}),i.a.createElement(w,{auth:this.auth,user:this.state.user,serverInfo:this.state.serverInfo}),i.a.createElement("div",{className:"my-3 my-md-5"},i.a.createElement("div",{className:"container"},i.a.createElement(A,{items:this.state.alerts,alerts:this.alerts}),a)),i.a.createElement(b,{modal:this.state.modal}),i.a.createElement(g.a,null))},a.render_dashboard=function(){var e;return[i.a.createElement(x,{showModal:this.showModal,user:this.state.user,userInfo:this.state.userInfo,auth:this.auth}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-4"},i.a.createElement(j,(e={user:this.state.user,payment:this.state.payment,serverInfo:this.state.serverInfo,userInfo:this.state.userInfo},e.payment=this.state.payment,e.showModal=this.showModal,e.auth=this.auth,e)),i.a.createElement(M,{auth:this.auth,user:this.state.user,social_links:this.state.social_links,serverInfo:this.state.serverInfo,showModal:this.showModal,userInfo:this.state.userInfo})),i.a.createElement("div",{className:"col-lg-8"},i.a.createElement(S,{component:this,history:this.state.history,auth:this.auth,showModal:this.showModal,user:this.state.user,userInfo:this.state.userInfo,serverInfo:this.state.serverInfo,social_links:this.state.social_links}),i.a.createElement(C,{component:this,history:this.state.history,auth:this.auth,showModal:this.showModal,user:this.state.user,userInfo:this.state.userInfo,serverInfo:this.state.serverInfo}),i.a.createElement(R,{component:this,payment:this.state.payment,auth:this.auth,showModal:this.showModal,user:this.state.user,userInfo:this.state.userInfo,serverInfo:this.state.serverInfo}),i.a.createElement(B,{user:this.state.user,history:this.state.admin_history,showModal:this.showModal,auth:this.auth})))]},t}(l.Component);t.default=L},153:function(e,t,a){var n;e.exports=(n=a(165))&&n.default||n},159:function(e,t,a){"use strict";a.r(t),a.d(t,"graphql",function(){return p}),a.d(t,"StaticQueryContext",function(){return u}),a.d(t,"StaticQuery",function(){return h});var n=a(0),s=a.n(n),r=a(8),o=a.n(r),l=a(151),i=a.n(l);a.d(t,"Link",function(){return i.a}),a.d(t,"withPrefix",function(){return l.withPrefix}),a.d(t,"navigate",function(){return l.navigate}),a.d(t,"push",function(){return l.push}),a.d(t,"replace",function(){return l.replace}),a.d(t,"navigateTo",function(){return l.navigateTo});var c=a(153),m=a.n(c);a.d(t,"PageRenderer",function(){return m.a});var d=a(31);a.d(t,"parsePath",function(){return d.a});var u=s.a.createContext({}),h=function(e){return s.a.createElement(u.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):s.a.createElement("div",null,"Loading (StaticQuery)")})};function p(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}h.propTypes={data:o.a.object,query:o.a.string.isRequired,render:o.a.func,children:o.a.func}},162:function(e,t,a){"use strict";var n=a(163),s=a(0),r=a.n(s),o=a(8),l=a.n(o),i=a(164),c=a.n(i),m=a(159),d=function(e){var t=e.children;return r.a.createElement(m.StaticQuery,{query:"755544856",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:"法定通貨に依存しない完全独自経済圏"},{name:"keywords",content:"ALIS Hacker Token, ALISハッカー部"}]},r.a.createElement("html",{lang:"en"})),t)},data:n})};d.propTypes={children:l.a.node.isRequired},t.a=d},163:function(e){e.exports={data:{site:{siteMetadata:{title:"ALIS Hacker Token - ALISハッカー部"}}}}},165:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),o=a.n(r),l=a(37),i=a(1),c=function(e){var t=e.location,a=i.a.getResourcesForPathname(t.pathname);return s.a.createElement(l.a,{location:t,pageResources:a})};c.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=c},168:function(e,t,a){"use strict";a(156),a(157),a(79),a(158);var n=a(12),s=a.n(n),r=a(0),o=a.n(r),l=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){var e=[],t=this.props.items||[{key:"twitter",href:"https://twitter.com/alishackers"},{key:"github",href:"https://github.com/alisista"},{key:"discord",href:"https://discord.gg/TyKbbrT"}],a=Array.isArray(t),n=0;for(t=a?t:t[Symbol.iterator]();;){var s;if(a){if(n>=t.length)break;s=t[n++]}else{if((n=t.next()).done)break;s=n.value}var r=s;e.push(o.a.createElement("li",{className:"list-inline-item"},o.a.createElement("a",{href:r.href,target:"_blank"},o.a.createElement("i",{className:"fab fa-"+r.key}))))}return o.a.createElement("footer",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-4"},o.a.createElement("span",{className:"copyright"},"Copyright © ALISハッカー部 2018")),o.a.createElement("div",{className:"col-md-4"},o.a.createElement("ul",{className:"list-inline social-buttons"},e)),o.a.createElement("div",{className:"col-md-4"},o.a.createElement("ul",{className:"list-inline quicklinks"})))))},t}(r.Component);t.a=l},170:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACJElEQVRYR+2VPSiFURjHvb5FvhaLEhaTm8UgZL0DKxmkDJJCsmKVFINMbOpuDDKYFAOTbEwssgjJ5xWu37/OqRPde9/7uljeU0/vOfec93l+z/88z3u9nH8e3j/HzwkBQgUCKZBIJCoo3kGngB89z1sNUtBBAe4IVoblmqAfPPeB6MoUImMAsm8iyCFWjtn3E8zjAJT8BcASQcaxNyzfBNQ8jg0AsZEJRBAFrghQhSlrDV2DvQpdQ+evASB/O863sEqTcaEBsQAvrGuBuPYLkZECAMRw3OfInmfm7+Y6BDANwMJvAeiureyaK7A6oMAAaH0PQHXWAci+B6ebzn0rxgFWgzU4qkjVViCO/ED4vgIA9nDY4WStqh/G6rAZAyZ/UiMGQH/WAAguSS8w2+evkl59z14j8xNMXaGi1NCerY+UHL4UIMgEXuawIuNNwQ4J0qY1+2pNdYb9LjwwH2F/PZ0KfgHOcFTvBH9i3k2AXQMwxnPeANjMj9lv+TEA2TXjRPevPyBlLuhbt9I5ow/TJVaMqRMEcY9FOHeeCiKtAjhfxsGoE1z+FnE86Trm3D5rfag01Joq0hXOTf0UQJmUmszlS2u12ekXgF7Wa+astqTWHeekTtKRUgGyivLmthNcjs5wqsr/Njgv+e1n2UJEOb+TjCAdgNpuRZkYB7rbWRzeJAGI8PsQpivQUPsOc/45EEAq6bK1l7YIsxUoVCBUIFQgmQKfkxKpIdZVQRMAAAAASUVORK5CYII="},176:function(e,t,a){"use strict";a(86),a(81),a(82),a(152),a(156),a(157),a(79),a(158),a(174),a(184),a(186),a(175);var n=a(0),s=a.n(n),r=a(187),o=a.n(r),l=a(190),i=a.n(l),c=a(167),m=a.n(c),d=a(154),u=a.n(d);a(191);var h={error_account_removal:{title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-danger fas fa-ban"})," エラー！"),body:"アカウント取り消しに失敗しました。時間を置いてもう一度お試し下さい。",cancel_text:"確認"},error_general:{title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-danger fas fa-ban"})," エラーが発生しました！"),body:"時間を置いてからもう一度申請して下さい。",cancel_text:"確認"}};o.a.initializeApp({apiKey:"AIzaSyAsl3dTaQWj8ljxb-2tLJd7FTYtexGInio",authDomain:"alishackers-f5d05.firebaseapp.com",databaseURL:"https://alishackers-f5d05.firebaseio.com",projectId:"alishackers-f5d05",storageBucket:"alishackers-f5d05.appspot.com",messagingSenderId:"791078170170",timestampsInSnapshots:!0});var p=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),this.opts=t,this.component=e,"undefined"!=typeof window){var s=a(192);this.Waves=s.create(s.MAINNET_CONFIG),this.db=o.a.firestore(),this.provider=new o.a.auth.TwitterAuthProvider,this.provider_github=new o.a.auth.GithubAuthProvider,o.a.auth().useDeviceLanguage(),o.a.auth().onAuthStateChanged(function(e){e?n.setUser(e,function(e){n.getUserInfo(e)}):!0===n.opts.redirect?window.location.href="/":n.component.setState({user:null,isUser:!1})})}}var t=e.prototype;return t.setData=function(e,t,a){var n=this;void 0==a&&(a=function(e){console.log(e),n.component.alerts.pushAlert("エラーが発生しました。時間をおいてもう一度お試し下さい！")}),this.db.collection("users").doc(this.component.state.user.uid).set(e,{merge:!0}).then(function(e){t()}).catch(function(e){a(e)})},t.updateData=function(e,t,a){var n=this;void 0==a&&(a=function(s){console.log(s),null!==s.toString().match(/no document to update/i)?n.setData(e,t,a):n.component.alerts.pushAlert("エラーが発生しました。時間をおいてもう一度お試し下さい！")}),this.db.collection("users").doc(this.component.state.user.uid).update(e).then(function(e){t()}).catch(function(e){a(e)})},t.confirmMission=function(e){var t=this,a=this.component.state.userInfo||{};void 0==a.missions&&(a.missions={}),void 0==a.missions[e]&&(a.missions[e]={tasks:{}}),void 0==a.missions[e].confirmed&&(a.missions[e].confirmed=Date.now());var n=[],r=!1,o=this.component.mission.tasks,l=Array.isArray(o),i=0;for(o=l?o:o[Symbol.iterator]();;){var c;if(l){if(i>=o.length)break;c=o[i++]}else{if((i=o.next()).done)break;c=i.value}var m=c;void 0!=m.social?void 0!=(this.component.state.social_links||{})[m.social+".com"]?n.push({task_id:m.id,social:m.social,id:this.component.state.social_links[m.social+".com"].uid}):void 0!=(this.component.state.serverInfo||{})[m.social]?n.push({task_id:m.id,social:m.social,id:this.component.state.serverInfo[m.social].id}):r=!0:n.push(!1)}if(1!=r){var d={uid:this.component.state.user.uid,mission_id:"join",date:Date.now(),tasks:n,confirmed:!1},u="join_"+d.uid;this.db.collection("mission_pool").doc(u).set(d).then(function(e){t.setUserInfo("missions",a.missions,function(){t.component.showModal({title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-success fas fa-check"})," ミッション確定！"),body:"ミッションを確定しました。２４時間以内に認証されます。しばらくお待ち下さい。",cancel_text:"確認"})})}).catch(function(e){console.log(e),t.component.showModal({title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-danger fas fa-ban"})," 認証エラー！"),body:"エラーが発生しました！時間を置いてもう一度お試し下さい。",cancel_text:"確認"})})}else this.component.showModal({title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-danger fas fa-ban"})," 認証エラー！"),body:"エラーが発生しました！時間を置いてもう一度お試し下さい。",cancel_text:"確認"})},t.completeTask=function(e,t){var a=this.component.state.userInfo||{};void 0==a.missions&&(a.missions={}),void 0==a.missions[e]&&(a.missions[e]={tasks:{}}),a.missions[e].tasks[t]=Date.now(),this.setUserInfo("missions",a.missions,function(){})},t.getUserInfo=function(e){var t=this;this.db.collection("users").doc(e.uid).get().then(function(a){var n=a.data()||{};t.component.setState({userInfo:n},function(){t.getServerInfo(e),t.getUserHistory(e),t.getUserPayment(e),void 0!=t.opts.oauth&&t.validateWavesAddress(t.opts.oauth),"955140685392424961"===t.component.state.user.id&&t.getAdminPayment()})}).catch(function(e){console.log(e)})},t.getServerInfo=function(e){var t=this;this.db.collection("users_server").doc(e.uid).get().then(function(e){var a=e.data()||{};t.component.setState({serverInfo:a},function(){})}).catch(function(e){console.log(e)})},t.getUserHistory=function(e){var t=this;this.db.collection("users").doc(e.uid).collection("history").get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),a=u()(a).sortBy(function(e){return-1*e.date}),t.component.setState({history:a},function(){})}).catch(function(e){console.log(e)})},t.getAdminPayment=function(){var e=this;this.db.collection("history").where("type","==","outsource").get().then(function(t){var a=[];t.forEach(function(e){a.push(e.data())}),a=u()(a).sortBy(function(e){return-1*e.date}),console.log(a),e.component.setState({admin_history:a},function(){})}).catch(function(e){console.log(e)})},t.getUserPayment=function(e){var t=this;this.db.collection("users").doc(e.uid).collection("payment").get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),a=u()(a).sortBy(function(e){return-1*e.date}),t.component.setState({payment:a},function(){})}).catch(function(e){console.log(e)})},t.retry=function(){var e=this,t=this.component.state.userInfo.missions,a=t.join.revoke;for(var n in t.join.tasks)a.includes("task-"+n)&&delete t.join.tasks[n];delete t.join.revoke,console.log(t),this.setUserInfo("missions",t,function(){e.component.alerts.pushAlert("重複アカウントによるタスクを取り消しました。別アカウントで再トライして下さい！","success")})},t.setUser=function(e,t){var a={created_at:e.metadata.creationTime,displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,id:e.providerData[0].uid},n={};e.providerData.forEach(function(e){n[e.providerId]=e}),this.component.setState({user:a,isUser:!0,social_links:n},function(){void 0!=t&&t(a)})},t.makePayment=function(e,t,a){var n=this;this.genRandomValue(function(r){console.log(e),window.$.post("https://dry-caverns-24809.herokuapp.com/alishackers/payment/",{random_value:r,uid:n.component.state.user.uid,twitter_id:n.component.state.user.id,amount:t,to:e.uid,what_for:a,photoURL:e.photoURL,displayName:e.displayName},function(a){null!=a.error?n.component.showModal(h.error_general):(n.getUserInfo(n.component.state.user),n.component.showModal({title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-green fas fa-check"})," ","支払いが完了しました！"),body:e.displayName+"さんにハッカー部から"+t+"AHTの支払いをしました！",cancel_text:"確認"}))})})},t.link_discord=function(){var e=this;this.genRandomValue(function(t){var a="https://discordapp.com/api/oauth2/authorize?client_id=486270221825474562&redirect_uri="+encodeURIComponent("https://dry-caverns-24809.herokuapp.com")+"%2Foauth%2Fdiscord&response_type=code&scope=guilds%20identify%20messages.read&state="+t+"_"+e.component.state.user.uid;window.location.href=a})},t.link_github=function(){var e=this;o.a.auth().currentUser.linkWithPopup(this.provider_github).then(function(t){e.setUser(t.user)}).catch(function(t){e.component.showModal({title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-danger fas fa-ban"})," 認証エラー！"),body:"そのアカウントは既に他のユーザーに使われています。",cancel_text:"確認"})})},t.registerPayment=function(e,t){var a=this,n=this.component.state.user.uid,r=this.component.state.payment,o=Date.now(),l={amount:e,address:t,date:o,status:"requested"},i={uid:n,amount:e,address:t,date:o,status:"requested"};r.unshift(l),this.db.collection("users").doc(n).collection("payment").doc(o+"_"+e).set(l).then(function(){a.component.setState({payment:r})}),this.db.collection("payment_pool").doc(n+"_"+o).set(i).then(function(){a.component.showModal({title:s.a.createElement("div",null,s.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","支払い手続き開始！"),body:s.a.createElement("p",null,"トークンの送信リストに登録しました。数分～数十分以内に指定のアドレスにトークンが送信されます。手続きの進行状況は支払い履歴から確認できます。"),cancel_text:"確認"})})},t.unlink_github=function(){var e=this;o.a.auth().currentUser.unlink("github.com").then(function(t){e.setUser(t)}).catch(function(t){e.component.showModal(h.error_account_removal)})},t.unlink_discord=function(){var e=this;this.genRandomValue(function(t){fetch("https://dry-caverns-24809.herokuapp.com/alishackers/remove/discord/"+e.component.state.user.uid+"/"+t+"/",{method:"POST"}).then(function(e){return e.json()}).then(function(t){void 0==t.error?e.getServerInfo(e.component.state.user):e.component.showModal(h.error_account_removal)}).catch(function(){e.component.showModal(h.error_account_removal)})})},t.login=function(){o.a.auth().signInWithPopup(this.provider).then(function(){window.location.href="/home/"}).catch(function(e){alert("ログインに失敗しました！もう一度お試し下さい。")})},t.logout=function(){o.a.auth().signOut().then(function(){window.location.href="/"}).catch(function(e){alert("ログアウトに失敗しました。もう一度お試し下さい。")})},t.validateWavesAddress=function(e){var t=e,a=m.a.parse(t,!0),n=a.query.d,s=(a.query.s,a.query.p),r=a.query.a,o=n.split("_"),l=o[0];o[1]!=this.component.state.user.uid||l!=this.component.state.userInfo.random_value||0==this.Waves.crypto.isValidAddress(r)?this.component.alerts.pushAlert("認証に失敗しました。時間を置いて再度お試し下さい。"):this.addWavesAddress({publickKey:s,address:r,added_at:Date.now()})},t.setAsReceiver=function(e){var t=this,a=this.component.state.userInfo.waves_addresses||{};for(var n in a)n==e?a[n].receiver=!0:delete a[n].receiver;this.setUserInfo("waves_addresses",a,function(){t.component.alerts.pushAlert("受け取りアドレスを"+e+" に変更しました！","success")})},t.checkAddressInPool=function(e,t){var a=this;this.db.collection("addresses").doc(e).get().then(function(n){n.exists?a.component.alerts.pushAlert(e+"は既に他の人に登録されているため使えません。"):t()}).catch(function(e){console.log(e),a.component.alerts.pushAlert("エラーが発生しました。時間をおいてもう一度お試し下さい！")})},t.addWavesAddress=function(e){var t=this,a=this.component.state.userInfo.waves_addresses||{};void 0!=a[e.address]?this.component.alerts.pushAlert(e.address+" は既に登録されています！","warning"):this.checkAddressInPool(e.address,function(){u.a.isEmpty(a)&&(e.receiver=!0),a[e.address]=e,t.setUserInfo("waves_addresses",a,function(){t.addAddressToPool(e.address,function(){t.component.alerts.pushAlert(e.address+" を追加しました！","success")})})})},t.setUserInfo=function(e,t,a){var n,s=this;this.updateData(((n={})[e]=t,n),function(){var n=s.component.state.userInfo||{};n[e]=t,s.component.setState({userInfo:n},function(){}),a()})},t.removeAddressFromPool=function(e,t){this.db.collection("addresses").doc(e).delete().then(function(e){t()}).catch(function(e){t()})},t.addAddressToPool=function(e,t){this.db.collection("addresses").doc(e).set({uid:this.component.state.user.uid}).then(function(e){t()}).catch(function(e){t()})},t.genRandomValue=function(e){var t=this,a=i()();this.setData({random_value:a},function(){var n=t.component.state.userInfo||{};n.random_value=a,t.component.setState({userInfo:n},function(){e(a)})})},t.removeWavesAddress=function(e){var t=this,a=this.component.state.userInfo.waves_addresses||{};delete a[e],this.setUserInfo("waves_addresses",a,function(){t.removeAddressFromPool(e,function(){t.component.alerts.pushAlert(e+" を削除しました！")})})},e}();t.a=p},213:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACrUExURUxpcQAAAABU/QBV/QBV/wBV/wBV/QA//wBV/QAA/xNd9BNb8xVd9A5a8hNd8QBV/xFb8RNe7w1Z8Q1Z8w9a9BFb9BNb9RNb9ABU/xZe9A5Y8Bdg8g9Z8xVe9RZd8h1k8hNc8xNd9gBW/RJb8iFl8BRd8hBb8A9a8RBb8hxj8hFb8gAz/wBV/gNc/wNb/wJc/wJb/wJa/wBV/QJZ/wFZ/wNd/wNZ/wRa/wRd/0MrWF8AAAAsdFJOUwAB+/v7A/wE/gGRgJF/c/xydICAlaSAjvqRf46ApH16gZP8lHt+bYJ9kJEFDHHjxQAAAJ9JREFUGNNFjlcWwyAMBNcxBpzee+8FjEva/U8WGUiyj58ZLU8CKLFAf4Aohk8gML1no58h7hnOTNUb4m7KpKroujX0v5EQKzK2IzBPw5LJmAki4GyYY6XGjxlwzViuvgmzBU7F9ltQkj83wDFteSOZXgI3tN0SJUM9pB30mgmXdl6DKE8T6FAntxzY2wVWb8712s2d2b+Kw59Lc9l5/gDcFxK6VyrYfgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=component---src-pages-home-js-48bbc19d9c58f7ccf6d7.js.map